ARG ARGPASSTHROUGH=3.14
ARG CACHE_DATE=1999-01-04
#ENV ENVPASSTHROUGH=2.71

FROM centos:centos7 AS base

ARG CACHE_DATE=1999-01-04

ARG ARGPASSTHROUGH
RUN echo "In base : ARGPASSTHROUGH is $ARGPASSTHROUGH"
RUN echo "In base : ENVPASSTHROUGH is $ENVPASSTHROUGH"
RUN echo "In base : CACHE_DATE is $CACHE_DATE"

FROM base AS deriv_a

ARG CACHE_DATE=1999-01-04
ARG ARGPASSTHROUGH

RUN echo "In deriv_a : ARGPASSTHROUGH is $ARGPASSTHROUGH"
RUN echo "In deriv_a : ENVPASSTHROUGH is $ENVPASSTHROUGH"
RUN echo "In deriv_a : CACHE_DATE is $CACHE_DATE"

FROM base AS deriv_b

ARG CACHE_DATE=1999-01-04

RUN echo "In deriv_b : ARGPASSTHROUGH is $ARGPASSTHROUGH"
RUN echo "In deriv_b : ENVPASSTHROUGH is $ENVPASSTHROUGH"
RUN echo "In deriv_b : CACHE_DATE is $CACHE_DATE"
